<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>OSRS AI Wiki Chat</title>
  <link rel="icon" href="/static/favicon.svg" type="image/svg+xml" />
  <link rel="apple-touch-icon" href="/static/apple-touch-icon.svg" />
  <link rel="manifest" href="/static/site.webmanifest" />
  <meta name="theme-color" content="#0b1320" />
  <link rel="stylesheet" href="/static/styles.css" />
</head>
<body>
  <canvas id="bg" aria-hidden="true"></canvas>
  <div class="container">
    <header class="header">
      <h1>OSRS AI Wiki Chat</h1>
      <nav>
        <span class="gold-pill" title="Total gold donated">
          <span class="gold-coin" aria-hidden="true"></span>
          <span><span id="goldTotal">0</span> gp donated</span>
        </span>
        <button id="fullscreenToggle" type="button" class="icon-btn" title="Enter fullscreen" aria-label="Enter fullscreen">
          <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true" focusable="false">
            <path fill="currentColor" d="M7 14H5v5h5v-2H7v-3zm0-4h2V7h3V5H5v5zm10 9h-3v2h5v-5h-2v3zm0-14V8h2V3h-5v2h3z"/>
          </svg>
        </button>
        <button id="toggleHistory" type="button" class="sidebar-btn">Public log</button>
        <a href="/donate">Donate</a>
      </nav>
    </header>

    <div class="app-layout">
      <main class="chat">
        <div class="public-notice">
          All interactions with <strong>Wise Old AI</strong> are publicly stored and shared.
        </div>
        <div id="viewBanner" class="view-banner" hidden>
          <span id="viewBannerText"></span>
          <button id="resumeChat" type="button">New chat</button>
        </div>

        <div id="wikiPreview" class="wiki-preview" hidden>
          <div class="wiki-preview__head">
            <div>
              <div id="wikiPreviewTitle" class="wiki-preview__title">Wiki Preview</div>
              <a id="wikiPreviewOpen" class="wiki-preview__open" href="#" target="_blank" rel="noopener noreferrer">Open in new tab</a>
            </div>
            <button id="wikiPreviewClose" type="button" class="wiki-preview__close">Close</button>
          </div>
          <div class="wiki-preview__body">
            <img id="wikiPreviewThumb" class="wiki-preview__thumb" alt="" hidden />
            <div id="wikiPreviewExtract" class="wiki-preview__extract"></div>
          </div>
        </div>

        <div id="messages" class="messages"></div>
        <form id="chatForm" class="composer">
          <input id="message" placeholder="Ask something about OSRS..." autocomplete="off" />
          <button type="submit">Send</button>
        </form>
        <div class="hint">
          Sources are cited from configured OSRS wiki sites.
        </div>
      </main>

      <aside class="sidebar" id="historySidebar">
        <div class="sidebar-head">
          <div class="sidebar-title">Public Chat Log</div>
          <button id="refreshHistory" type="button" class="sidebar-btn">Refresh</button>
        </div>
        <div class="sidebar-note">
          Notice: all interactions with <strong>Wise Old AI</strong> are publicly stored and shared.
        </div>
        <div id="historyList" class="history"></div>
      </aside>
    </div>
  </div>

  <script src="/static/background.js"></script>
  <script src="/static/site.js"></script>
  <script src="/static/app.js"></script>
</body>
</html>
